# ๐๏ธ ุงูููู ุงูุฒููู ุฑูู 2 - ูุงุนุฏุฉ ุงูุจูุงูุงุช
**ุงูุชุงุฑูุฎ:** 13 ููุงูุฑ 2025  
**ุงูููุถูุน:** ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุชุทุจูู  
**ุงูุญุงูุฉ:** ููุชูู โ

---

## ๐ ูุธุฑุฉ ุนุงูุฉ ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ููุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
**MySQL** - ูุงุนุฏุฉ ุจูุงูุงุช ุนูุงุฆููุฉ ูุชูุฏูุฉ ูุน ุฏุนู ูุงูู ูู Laravel Eloquent ORM

### ุนุฏุฏ ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ
**7 ุฌุฏุงูู** - 3 ุฌุฏุงูู Laravel ุงูุงูุชุฑุงุถูุฉ + 4 ุฌุฏุงูู ูุฎุตุตุฉ ูููุดุฑูุน

---

## ๐๏ธ ุงูุฌุฏุงูู ุงููููุดุฃุฉ ูุงูููุทุจูุฉ

### 1. ุฌุฏุงูู Laravel ุงูุงูุชุฑุงุถูุฉ

#### ๐ ุฌุฏูู `users`
```sql
-- Migration: 0001_01_01_000000_create_users_table.php
CREATE TABLE users (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    email_verified_at TIMESTAMP NULL,
    password VARCHAR(255) NOT NULL,
    remember_token VARCHAR(100) NULL,
    
    -- ุงูุญููู ุงููุถุงูุฉ ูููุดุฑูุน
    type ENUM('admin', 'teacher', 'student') NOT NULL DEFAULT 'student',
    phone VARCHAR(20) NULL,
    student_id VARCHAR(50) UNIQUE NULL,
    employee_id VARCHAR(50) UNIQUE NULL,
    bio TEXT NULL,
    department VARCHAR(100) NULL,
    birth_date DATE NULL,
    gender ENUM('male', 'female') NULL,
    address TEXT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    last_login_at TIMESTAMP NULL,
    
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL
);
```

#### ๐๏ธ ุฌุฏูู `cache`
```sql
-- Migration: 0001_01_01_000001_create_cache_table.php
CREATE TABLE cache (
    key VARCHAR(255) PRIMARY KEY,
    value MEDIUMTEXT NOT NULL,
    expiration INT NOT NULL
);

CREATE TABLE cache_locks (
    key VARCHAR(255) PRIMARY KEY,
    owner VARCHAR(255) NOT NULL,
    expiration INT NOT NULL
);
```

#### โ๏ธ ุฌุฏูู `jobs`
```sql
-- Migration: 0001_01_01_000002_create_jobs_table.php
CREATE TABLE jobs (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    queue VARCHAR(255) NOT NULL,
    payload LONGTEXT NOT NULL,
    attempts TINYINT UNSIGNED NOT NULL,
    reserved_at INT UNSIGNED NULL,
    available_at INT UNSIGNED NOT NULL,
    created_at INT UNSIGNED NOT NULL
);

CREATE TABLE job_batches (
    id VARCHAR(255) PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    total_jobs INT NOT NULL,
    pending_jobs INT NOT NULL,
    failed_jobs INT NOT NULL,
    failed_job_ids LONGTEXT NOT NULL,
    options MEDIUMTEXT NULL,
    cancelled_at INT NULL,
    created_at INT NOT NULL,
    finished_at INT NULL
);

CREATE TABLE failed_jobs (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    uuid VARCHAR(255) UNIQUE NOT NULL,
    connection TEXT NOT NULL,
    queue TEXT NOT NULL,
    payload LONGTEXT NOT NULL,
    exception LONGTEXT NOT NULL,
    failed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 2. ุฌุฏุงูู ุงููุดุฑูุน ุงููุฎุตุตุฉ

#### ๐ ุฌุฏูู `lessons`
```sql
-- Migration: 2025_10_14_085831_create_lessons_table.php
CREATE TABLE lessons (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    description TEXT NULL,
    teacher_id BIGINT UNSIGNED NOT NULL,
    lesson_date DATE NOT NULL,
    start_time TIME NOT NULL,
    end_time TIME NOT NULL,
    location VARCHAR(255) NULL,
    max_students INT DEFAULT 30,
    is_active BOOLEAN DEFAULT TRUE,
    notes TEXT NULL,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    
    FOREIGN KEY (teacher_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_lesson_date (lesson_date),
    INDEX idx_teacher_id (teacher_id),
    INDEX idx_is_active (is_active)
);
```

#### ๐ ุฌุฏูู `lesson_student`
```sql
-- Migration: 2025_10_14_085922_create_lesson_student_table.php
CREATE TABLE lesson_student (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    lesson_id BIGINT UNSIGNED NOT NULL,
    student_id BIGINT UNSIGNED NOT NULL,
    enrolled_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT TRUE,
    notes TEXT NULL,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    
    FOREIGN KEY (lesson_id) REFERENCES lessons(id) ON DELETE CASCADE,
    FOREIGN KEY (student_id) REFERENCES users(id) ON DELETE CASCADE,
    UNIQUE KEY unique_lesson_student (lesson_id, student_id),
    INDEX idx_lesson_id (lesson_id),
    INDEX idx_student_id (student_id)
);
```

#### โ ุฌุฏูู `attendances`
```sql
-- Migration: 2025_10_14_090010_create_attendances_table.php
CREATE TABLE attendances (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    lesson_id BIGINT UNSIGNED NOT NULL,
    student_id BIGINT UNSIGNED NOT NULL,
    status ENUM('present', 'absent', 'late', 'excused') NOT NULL DEFAULT 'absent',
    attendance_time TIMESTAMP NULL,
    method ENUM('manual', 'code', 'auto') NOT NULL DEFAULT 'manual',
    marked_by BIGINT UNSIGNED NULL,
    notes TEXT NULL,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    
    FOREIGN KEY (lesson_id) REFERENCES lessons(id) ON DELETE CASCADE,
    FOREIGN KEY (student_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (marked_by) REFERENCES users(id) ON DELETE SET NULL,
    UNIQUE KEY unique_lesson_student_attendance (lesson_id, student_id),
    INDEX idx_lesson_id (lesson_id),
    INDEX idx_student_id (student_id),
    INDEX idx_status (status),
    INDEX idx_attendance_time (attendance_time)
);
```

#### ๐ข ุฌุฏูู `attendance_codes`
```sql
-- Migration: 2025_10_14_090058_create_attendance_codes_table.php
CREATE TABLE attendance_codes (
    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    lesson_id BIGINT UNSIGNED NOT NULL,
    code VARCHAR(10) UNIQUE NOT NULL,
    expires_at TIMESTAMP NOT NULL,
    max_usage INT DEFAULT 1,
    current_usage INT DEFAULT 0,
    is_active BOOLEAN DEFAULT TRUE,
    created_by BIGINT UNSIGNED NOT NULL,
    deactivated_by BIGINT UNSIGNED NULL,
    deactivated_at TIMESTAMP NULL,
    created_at TIMESTAMP NULL,
    updated_at TIMESTAMP NULL,
    
    FOREIGN KEY (lesson_id) REFERENCES lessons(id) ON DELETE CASCADE,
    FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (deactivated_by) REFERENCES users(id) ON DELETE SET NULL,
    INDEX idx_lesson_id (lesson_id),
    INDEX idx_code (code),
    INDEX idx_expires_at (expires_at),
    INDEX idx_is_active (is_active)
);
```

---

## ๐ ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู

### ุงูุนูุงูุงุช ุงูุฃุณุงุณูุฉ

#### 1. ุนูุงูุงุช ุฌุฏูู `users`
```
users (1) -----> (โ) lessons [teacher_id]
users (โ) <----> (โ) lessons [lesson_student table]
users (1) -----> (โ) attendances [student_id]
users (1) -----> (โ) attendances [marked_by]
users (1) -----> (โ) attendance_codes [created_by]
users (1) -----> (โ) attendance_codes [deactivated_by]
```

#### 2. ุนูุงูุงุช ุฌุฏูู `lessons`
```
lessons (1) -----> (โ) lesson_student [lesson_id]
lessons (1) -----> (โ) attendances [lesson_id]
lessons (1) -----> (โ) attendance_codes [lesson_id]
```

#### 3. ุนูุงูุงุช ุฌุฏูู `lesson_student`
```
lesson_student (โ) -----> (1) lessons [lesson_id]
lesson_student (โ) -----> (1) users [student_id]
```

#### 4. ุนูุงูุงุช ุฌุฏูู `attendances`
```
attendances (โ) -----> (1) lessons [lesson_id]
attendances (โ) -----> (1) users [student_id]
attendances (โ) -----> (1) users [marked_by]
```

#### 5. ุนูุงูุงุช ุฌุฏูู `attendance_codes`
```
attendance_codes (โ) -----> (1) lessons [lesson_id]
attendance_codes (โ) -----> (1) users [created_by]
attendance_codes (โ) -----> (1) users [deactivated_by]
```

---

## ๐ ุฅุญุตุงุฆูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุญุงูุฉ ุงูุฌุฏุงูู
| ุงูุฌุฏูู | ุงูุญุงูุฉ | ุนุฏุฏ ุงูุญููู | ุงูููุงุชูุญ ุงูุฎุงุฑุฌูุฉ | ุงูููุงุฑุณ |
|--------|--------|------------|------------------|---------|
| users | โ ููุทุจู | 17 | 0 | 3 |
| lessons | โ ููุทุจู | 12 | 1 | 4 |
| lesson_student | โ ููุทุจู | 8 | 2 | 3 |
| attendances | โ ููุทุจู | 10 | 3 | 5 |
| attendance_codes | โ ููุทุจู | 12 | 3 | 4 |
| cache | โ ููุทุจู | 3 | 0 | 1 |
| jobs | โ ููุทุจู | 7 | 0 | 2 |

### ุฅุฌูุงูู ุงูุฅุญุตุงุฆูุงุช
- **ุฅุฌูุงูู ุงูุฌุฏุงูู:** 7
- **ุฅุฌูุงูู ุงูุญููู:** 69
- **ุฅุฌูุงูู ุงูููุงุชูุญ ุงูุฎุงุฑุฌูุฉ:** 9
- **ุฅุฌูุงูู ุงูููุงุฑุณ:** 22

---

## ๐๏ธ ุฃูุงูุฑ Laravel ุงูููุณุชุฎุฏูุฉ

### ุฅูุดุงุก ุงูุฌุฏุงูู (Migrations)
```bash
# ุงูุฌุฏุงูู ุงูุงูุชุฑุงุถูุฉ (ุชู ุฅูุดุงุคูุง ุชููุงุฆูุงู)
php artisan install:api

# ุฌุฏุงูู ุงููุดุฑูุน ุงููุฎุตุตุฉ
php artisan make:migration create_lessons_table
php artisan make:migration create_lesson_student_table  
php artisan make:migration create_attendances_table
php artisan make:migration create_attendance_codes_table
```

### ุชุทุจูู ุงูุฌุฏุงูู
```bash
# ุชุทุจูู ุฌููุน ุงูุฌุฏุงูู
php artisan migrate

# ุงูุชุญูู ูู ุญุงูุฉ ุงูุฌุฏุงูู
php artisan migrate:status
```

### ูุชูุฌุฉ `migrate:status`
```
Migration name ......................................................... Batch / Status
0001_01_01_000000_create_users_table ................................... [1] Ran
0001_01_01_000001_create_cache_table ................................... [1] Ran
0001_01_01_000002_create_jobs_table .................................... [1] Ran
2025_10_14_085831_create_lessons_table ................................. [1] Ran
2025_10_14_085922_create_lesson_student_table .......................... [1] Ran
2025_10_14_090010_create_attendances_table ............................. [1] Ran
2025_10_14_090058_create_attendance_codes_table ........................ [1] Ran
```

---

## ๐ ุชุญููู ุงูุฃุฏุงุก ูุงูุชุญุณูู

### ุงูููุงุฑุณ ุงูููุทุจูุฉ

#### ุฌุฏูู `users`
- **PRIMARY:** id
- **UNIQUE:** email, student_id, employee_id
- **INDEX:** type, is_active

#### ุฌุฏูู `lessons`
- **PRIMARY:** id
- **FOREIGN KEY:** teacher_id โ users(id)
- **INDEX:** lesson_date, teacher_id, is_active

#### ุฌุฏูู `lesson_student`
- **PRIMARY:** id
- **FOREIGN KEY:** lesson_id โ lessons(id), student_id โ users(id)
- **UNIQUE:** (lesson_id, student_id)
- **INDEX:** lesson_id, student_id

#### ุฌุฏูู `attendances`
- **PRIMARY:** id
- **FOREIGN KEY:** lesson_id โ lessons(id), student_id โ users(id), marked_by โ users(id)
- **UNIQUE:** (lesson_id, student_id)
- **INDEX:** lesson_id, student_id, status, attendance_time

#### ุฌุฏูู `attendance_codes`
- **PRIMARY:** id
- **FOREIGN KEY:** lesson_id โ lessons(id), created_by โ users(id), deactivated_by โ users(id)
- **UNIQUE:** code
- **INDEX:** lesson_id, code, expires_at, is_active

### ุชุญุณููุงุช ุงูุฃุฏุงุก ุงูููุทุจูุฉ
1. **ููุฑุณุฉ ุงูุญููู ุงูููุณุชุนูู ุนููุง ุจูุซุฑุฉ**
2. **ูููุฏ ุงููุฑุงุฏุฉ ูููุน ุงูุชูุฑุงุฑ**
3. **ุงูููุงุชูุญ ุงูุฎุงุฑุฌูุฉ ููุญูุงุธ ุนูู ุณูุงูุฉ ุงูุจูุงูุงุช**
4. **ุฃููุงุน ุงูุจูุงูุงุช ุงูููุญุณูุฉ (ENUM, BOOLEAN)**

---

## ๐ ุงุนุชุจุงุฑุงุช ุงูุฃูุงู ุงูููุทุจูุฉ

### ุญูุงูุฉ ุงูุจูุงูุงุช
- **ุชุดููุฑ ูููุงุช ุงููุฑูุฑ** ุจุงุณุชุฎุฏุงู bcrypt
- **ูููุฏ ุงูููุงุชูุญ ุงูุฎุงุฑุฌูุฉ** ูููุน ุงูุจูุงูุงุช ุงููุนููุฉ
- **ููุฑุณุฉ ุงูุญููู ุงูุญุณุงุณุฉ** ูุชุญุณูู ุงูุฃุฏุงุก

### ุณูุงูุฉ ุงูุจูุงูุงุช
- **ูููุฏ ุงููุฑุงุฏุฉ** ููุญููู ุงููููุฉ (email, student_id, code)
- **ูููุฏ NOT NULL** ููุญููู ุงูุฅุฌุจุงุฑูุฉ
- **ููู ุงูุชุฑุงุถูุฉ** ููุญููู ุงูุงุฎุชูุงุฑูุฉ

### ุฅุฏุงุฑุฉ ุงูุญุฐู
- **CASCADE DELETE** ููุจูุงูุงุช ุงูุชุงุจุนุฉ
- **SET NULL** ูููุฑุงุฌุน ุงูุงุฎุชูุงุฑูุฉ
- **ุญูุงูุฉ ูู ุงูุญุฐู ุงูุนุฑุถู**

---

## ๐ ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### 1. ุฅูุดุงุก ุฏุฑุณ ุฌุฏูุฏ
```sql
-- ุฅุฏุฑุงุฌ ุฏุฑุณ ุฌุฏูุฏ
INSERT INTO lessons (title, description, teacher_id, lesson_date, start_time, end_time, location, max_students)
VALUES ('ููุฏูุฉ ูู ุงูุจุฑูุฌุฉ', 'ุฏุฑุณ ุชุนุฑููู ุจุฃุณุงุณูุงุช ุงูุจุฑูุฌุฉ', 1, '2025-01-15', '09:00:00', '11:00:00', 'ูุงุนุฉ A1', 25);

-- ุฑุจุท ุงูุทูุงุจ ุจุงูุฏุฑุณ
INSERT INTO lesson_student (lesson_id, student_id) VALUES (1, 2), (1, 3), (1, 4);
```

### 2. ุชูููุฏ ููุฏ ุญุถูุฑ
```sql
-- ุฅูุดุงุก ููุฏ ุญุถูุฑ ุฌุฏูุฏ
INSERT INTO attendance_codes (lesson_id, code, expires_at, max_usage, created_by)
VALUES (1, 'ABC123', '2025-01-15 09:30:00', 25, 1);
```

### 3. ุชุณุฌูู ุงูุญุถูุฑ
```sql
-- ุชุณุฌูู ุญุถูุฑ ุทุงูุจ
INSERT INTO attendances (lesson_id, student_id, status, attendance_time, method, marked_by)
VALUES (1, 2, 'present', NOW(), 'code', 1);

-- ุชุญุฏูุซ ุงุณุชุฎุฏุงู ุงูููุฏ
UPDATE attendance_codes SET current_usage = current_usage + 1 WHERE id = 1;
```

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ุงููุฑุญูุฉ ุงููุงุฏูุฉ
1. **ุฅูุดุงุก ุงูููุงุฐุฌ (Models)** ูุน ุงูุนูุงูุงุช ุงููุงููุฉ
2. **ุชุทููุฑ Filament Resources** ููุฅุฏุงุฑุฉ
3. **ุฅูุดุงุก Seeders** ูุจูุงูุงุช ุชุฌุฑูุจูุฉ
4. **ุชุทููุฑ ููุทู ุงูุฃุนูุงู** ุงูุฃุณุงุณู

### ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ
1. **ุฅุถุงูุฉ ููุงุฑุณ ูุฑูุจุฉ** ููุงุณุชุนูุงูุงุช ุงููุนูุฏุฉ
2. **ุชุทุจูู Soft Deletes** ููุจูุงูุงุช ุงููููุฉ
3. **ุฅุถุงูุฉ ุฌุฏุงูู ุงูุชุฏููู** ูุชุชุจุน ุงูุชุบููุฑุงุช
4. **ุชุญุณูู ุฃุฏุงุก ุงูุงุณุชุนูุงูุงุช** ุงููุจูุฑุฉ

---

## ๐ ููุงุญุธุงุช ุชูููุฉ

### ููุงุท ุงูููุฉ
โ **ูููู ููุทูู ููุฑู** ููุจูุงูุงุช  
โ **ุนูุงูุงุช ูุญููุฉ** ุจูู ุงูุฌุฏุงูู  
โ **ููุฑุณุฉ ูุญุณูุฉ** ููุฃุฏุงุก  
โ **ูููุฏ ุฃูุงู** ุดุงููุฉ  
โ **ูุงุจููุฉ ุงูุชูุณุน** ุงููุณุชูุจููุฉ  

### ุงูุชุญุฏูุงุช ุงููุญูููุฉ
โ **ููุน ุชูุฑุงุฑ ุงูุชุณุฌูู** ูู ููุณ ุงูุฏุฑุณ  
โ **ุถูุงู ูุฑุงุฏุฉ ุฃููุงุฏ ุงูุญุถูุฑ**  
โ **ุฅุฏุงุฑุฉ ุงูุชูุงุก ุตูุงุญูุฉ ุงูุฃููุงุฏ**  
โ **ุชุชุจุน ูุตุฏุฑ ุชุณุฌูู ุงูุญุถูุฑ**  
โ **ูุฑููุฉ ูู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู**  

---

**๐ ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 13 ููุงูุฑ 2025  
**๐ค ุงููุทูุฑ:** Osaid Salah  
**๐๏ธ ููุน ูุงุนุฏุฉ ุงูุจูุงูุงุช:** MySQL  
**๐ ุฅุฌูุงูู ุงูุฌุฏุงูู:** 7 ุฌุฏุงูู  

---

*ูุฐุง ุงูููู ุฌุฒุก ูู ุณูุณูุฉ ุงููููุงุช ุงูุฒูููุฉ ูุชูุซูู ุชูุฏู ูุดุฑูุน BasmahAnwarAlOlmaaV1.0*