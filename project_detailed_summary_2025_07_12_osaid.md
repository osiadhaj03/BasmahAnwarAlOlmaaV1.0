# مشروع إدارة الدروس والحضور

---

## فكرة المشروع

مشروع إدارة الدروس والحضور هو نظام إلكتروني متكامل يهدف إلى تنظيم العملية التعليمية في المؤسسات الأكاديمية أو التدريبية، بحيث يوفر بيئة تفاعلية بين المديرين، الأساتذة، والطلاب. يتيح النظام لكل فئة من المستخدمين صلاحيات وإمكانيات مختلفة حسب دورهم، ويعتمد على إدارة العلاقات بين الجداول لضمان دقة وسهولة الوصول للمعلومات.

---

## أهداف النظام

- تسهيل إدارة الدروس، الأساتذة، الطلاب، والحضور.
- ضمان تسجيل الحضور بشكل آمن وفعلي.
- توفير لوحة تحكم مخصصة لكل نوع مستخدم.
- دعم تسجيل الطلاب في الدروس ومتابعة تقدمهم.
- تمكين المدير من الإشراف الكامل على النظام.

---

## مكونات النظام

### 1. المستخدمون (Users)
- لكل مستخدم نوع (مدير، أستاذ، طالب) يتم تحديده في قاعدة البيانات.
- المدير: صلاحيات كاملة لإدارة جميع عناصر النظام.
- الأستاذ: صلاحيات لإدارة دروسه فقط، والطلاب المسجلين فيها، وحضورهم.
- الطالب: صلاحيات لمتابعة الدروس المسجل فيها، التسجيل في دروس جديدة، ومتابعة حضوره.

### 2. الدروس (Lessons)
- كل درس مرتبط بأستاذ واحد.
- يحتوي على معلومات مثل العنوان، الوصف، أوقات وتواريخ الدرس، نوع الدرس (حضوري/عن بعد)، حالة الدرس (نشط/غير نشط)، أيام الدرس، تكرار الدرس.
- يمكن ربط عدة طلاب بالدرس عبر جدول وسيط.

### 3. الطلاب المسجلين في الدروس (LessonStudent)
- جدول وسيط يربط الطلاب بالدروس.
- يسهل عملية تسجيل الطلاب في الدروس وإدارة علاقتهم بها.

### 4. الحضور (Attendances)
- يسجل حضور كل طالب في كل درس.
- يحتوي على معلومات مثل رقم الدرس، رقم الطالب، حالة الحضور.

---

## العلاقات بين الجداول

- درس مرتبط بأستاذ واحد (teacher_id).
- درس مرتبط بعدة طلاب (students عبر lesson_student).
- درس له سجلات حضور (attendances).
- المستخدم (User) قد يكون أستاذ وله دروس، أو طالب وله دروس مسجل فيها.

---

## سيناريو الاستخدام المستقبلي (ميزة الرقم العشوائي/QR)

عند عرض صفحة الدرس، يظهر رقم عشوائي أو رمز QR يتجدد تلقائيًا كل 30 ثانية. في لوحة تحكم الطالب، عندما يدخل الطالب إلى الدرس، يُطلب منه إدخال هذا الرقم أو مسح رمز الـ QR. عند إدخال الرقم أو مسح الرمز، يقوم النظام بتسجيل حضور الطالب تلقائيًا لهذا الدرس.

هذه الميزة تضمن أن الحضور يتم بشكل آمن وفعلي أثناء وقت الدرس، وتمنع تسجيل الحضور إلا للطلاب الموجودين فعليًا في الدرس، وتقلل من حالات التلاعب أو الغياب غير المبرر.

---

## لوحة التحكم لكل مستخدم

### المدير (Admin Dashboard)
- عرض وإدارة جميع الأساتذة، الطلاب، الدروس، الحضور.
- إضافة وتعديل وحذف أي عنصر في النظام.
- مراقبة إحصائيات النظام وتقارير الحضور.

### الأستاذ (Teacher Dashboard)
- عرض الدروس الخاصة به فقط.
- إدارة الطلاب المسجلين في دروسه.
- متابعة حضور الطلاب في كل درس.
- إضافة أو تعديل معلومات الدروس الخاصة به.

### الطالب (Student Dashboard)
- عرض الدروس المسجل فيها.
- التسجيل في دروس جديدة.
- متابعة حضوره في كل درس.
- إدخال الرقم العشوائي أو مسح رمز QR لتسجيل الحضور.

---

## إدارة العلاقات (RelationManager)

يتم استخدام RelationManager في Filament لعرض وإدارة العلاقات المرتبطة بين الجداول، مثل:
- عرض الطلاب المسجلين في كل درس.
- عرض حضور الطلاب في كل درس.
- تخصيص RelationManager ليظهر فقط حسب نوع المستخدم (مدير، أستاذ، طالب).

مثال عملي: في صفحة درس معين، يظهر RelationManager للطلاب المسجلين والحضور، ويمكن للأستاذ أو المدير إدارة هذه العلاقات مباشرة من لوحة التحكم.

---

## خطوات التطوير التي تم إنجازها

1. إعداد جداول قاعدة البيانات (lessons، lesson_student، attendances).
2. بناء العلاقات في الـ Models وربطها بالجداول.
3. تجهيز لوحة تحكم لكل نوع مستخدم.
4. شرح وتخطيط ميزة الرقم العشوائي/QR لتسجيل الحضور.
5. تجهيز خطة العمل لإنشاء RelationManagers وعرض العلاقات بشكل عملي.

---

## خطة العمل القادمة

1. إنشاء RelationManagers في LessonResource:
   - StudentsRelationManager: لإدارة الطلاب المسجلين في الدرس.
   - AttendancesRelationManager: لإدارة حضور الطلاب في الدرس.
2. تخصيص RelationManagers في UserResource:
   - للأستاذ: عرض الدروس الخاصة به، الطلاب المسجلين، حضور الطلاب.
   - للطالب: عرض الدروس المسجل فيها، الحضور الخاص به.
3. ضبط الصلاحيات (Authorization) حسب نوع المستخدم.
4. اختبار النظام من ناحية عرض البيانات لكل نوع مستخدم.
5. تطوير ميزة الرقم العشوائي/QR وربطها بالحضور.

---

## ملاحظات وتوصيات

- يجب التأكد من حماية النظام من التلاعب في الحضور.
- يفضل استخدام مكتبة جاهزة لتوليد رمز QR وتحديثه تلقائيًا.
- يمكن إضافة إشعارات للطلاب عند تسجيل الحضور أو الغياب.
- النظام قابل للتطوير ليشمل ميزات إضافية مثل تقييم الدروس، رسائل بين المستخدمين، تقارير مفصلة.

---

> هذا الملخص يوضح جميع تفاصيل المشروع، أهدافه، مكوناته، وسيناريوهات الاستخدام الحالية والمستقبلية، مع خطة عمل واضحة للخطوات القادمة.
